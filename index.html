
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Blackjack Advisor + Live Count + Heatmap</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #111;
      color: #fff;
      padding: 2em;
      max-width: 800px;
      margin: auto;
    }
    .section {
      margin-bottom: 1.5em;
    }
    button {
      margin: 0.3em;
      padding: 0.5em 1em;
      font-size: 1em;
      background-color: #444;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #666;
    }
    input {
      background-color: #222;
      color: #fff;
      padding: 0.4em;
      width: 60px;
      border: 1px solid #444;
    }
    .heatmap {
      display: flex;
      flex-wrap: wrap;
      max-width: 320px;
      gap: 4px;
    }
    .heatbox {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: bold;
    }
    .green { background-color: #2ecc71; }
    .yellow { background-color: #f1c40f; }
    .orange { background-color: #e67e22; }
    .red { background-color: #e74c3c; }
  </style>
</head>
<body>
  <h2>üß† Blackjack Advisor + Live Count + Heatmap</h2>

  <div class="section">
    <h4>1Ô∏è‚É£ Select Player Cards:</h4>
    <div id="player-cards"></div>
    <div>
      <button onclick="addCardToHand('2')">2</button>
      <button onclick="addCardToHand('3')">3</button>
      <button onclick="addCardToHand('4')">4</button>
      <button onclick="addCardToHand('5')">5</button>
      <button onclick="addCardToHand('6')">6</button>
      <button onclick="addCardToHand('7')">7</button>
      <button onclick="addCardToHand('8')">8</button>
      <button onclick="addCardToHand('9')">9</button>
      <button onclick="addCardToHand('10')">10</button>
      <button onclick="addCardToHand('J')">J</button>
      <button onclick="addCardToHand('Q')">Q</button>
      <button onclick="addCardToHand('K')">K</button>
      <button onclick="addCardToHand('A')">A</button>
    </div>
  </div>

  <div class="section">
    <h4>2Ô∏è‚É£ Select Dealer Upcard:</h4>
    <div>
      <button onclick="setDealerCard('2')">2</button>
      <button onclick="setDealerCard('3')">3</button>
      <button onclick="setDealerCard('4')">4</button>
      <button onclick="setDealerCard('5')">5</button>
      <button onclick="setDealerCard('6')">6</button>
      <button onclick="setDealerCard('7')">7</button>
      <button onclick="setDealerCard('8')">8</button>
      <button onclick="setDealerCard('9')">9</button>
      <button onclick="setDealerCard('10')">10</button>
      <button onclick="setDealerCard('J')">J</button>
      <button onclick="setDealerCard('Q')">Q</button>
      <button onclick="setDealerCard('K')">K</button>
      <button onclick="setDealerCard('A')">A</button>
    </div>
    <p>Dealer card: <span id="dealer-card">none</span></p>
  </div>

  <div class="section">
    <h4>3Ô∏è‚É£ Live Count Tracking:</h4>
    <div>
      <p>Click cards as dealt:</p>
      <button onclick="registerCard('2')">2</button>
      <button onclick="registerCard('3')">3</button>
      <button onclick="registerCard('4')">4</button>
      <button onclick="registerCard('5')">5</button>
      <button onclick="registerCard('6')">6</button>
      <button onclick="registerCard('7')">7</button>
      <button onclick="registerCard('8')">8</button>
      <button onclick="registerCard('9')">9</button>
      <button onclick="registerCard('10')">10</button>
      <button onclick="registerCard('J')">J</button>
      <button onclick="registerCard('Q')">Q</button>
      <button onclick="registerCard('K')">K</button>
      <button onclick="registerCard('A')">A</button>
    </div>
    <label>Decks: <input type="number" id="deckCount" value="6" min="1" step="1" onchange="updateDisplay()" /></label>
    <button onclick="resetAll()">üîÑ Reset All</button>
    <div class="result">
      <p id="cardsSeen">Cards Seen: 0</p>
      <p id="runningCount">Running Count: 0</p>
      <p id="trueCount">True Count: 0.00</p>
    </div>
  </div>

  <div class="section">
    <button onclick="getAdvice()">üîç Get Advice</button>
    <div class="result">
      <p id="hand-total">Player total: 0</p>
      <p id="advice">Recommended move: -</p>
    </div>
  </div>

  <div class="section">
    <h4>4Ô∏è‚É£ Heatmap Guide (TC Impact):</h4>
    <div class="heatmap">
      <div class="heatbox green">Stand</div>
      <div class="heatbox yellow">Hit</div>
      <div class="heatbox orange">Double</div>
      <div class="heatbox red">Split</div>
    </div>
  </div>

  <script>
    let playerCards = [];
    let dealerCard = null;
    let runningCount = 0;
    let cardsSeen = 0;

    const cardValues = {
      '2': 1, '3': 1, '4': 1, '5': 1, '6': 1,
      '7': 0, '8': 0, '9': 0,
      '10': -1, 'J': -1, 'Q': -1, 'K': -1, 'A': -1
    };

    function addCardToHand(card) {
      playerCards.push(card);
      document.getElementById('player-cards').innerText = "Hand: " + playerCards.join(', ');
    }

    function setDealerCard(card) {
      dealerCard = card;
      document.getElementById('dealer-card').innerText = card;
    }

    function resetAll() {
      playerCards = [];
      dealerCard = null;
      runningCount = 0;
      cardsSeen = 0;
      document.getElementById('player-cards').innerText = "Hand: ";
      document.getElementById('dealer-card').innerText = "none";
      document.getElementById('cardsSeen').innerText = "Cards Seen: 0";
      document.getElementById('runningCount').innerText = "Running Count: 0";
      document.getElementById('trueCount').innerText = "True Count: 0.00";
      document.getElementById('hand-total').innerText = "Player total: 0";
      document.getElementById('advice').innerText = "Recommended move: -";
    }

    function registerCard(card) {
      if (cardValues.hasOwnProperty(card)) {
        runningCount += cardValues[card];
        cardsSeen++;
        updateDisplay();
      }
    }

    function updateDisplay() {
      const decks = parseInt(document.getElementById('deckCount').value);
      const totalCards = decks * 52;
      const remainingDecks = Math.max((totalCards - cardsSeen) / 52, 1);
      const trueCount = (runningCount / remainingDecks).toFixed(2);

      document.getElementById('cardsSeen').innerText = "Cards Seen: " + cardsSeen;
      document.getElementById('runningCount').innerText = "Running Count: " + runningCount;
      document.getElementById('trueCount').innerText = "True Count: " + trueCount;
    }

    function cardValue(card) {
      if (['J','Q','K','10'].includes(card)) return 10;
      if (card === 'A') return 11;
      return parseInt(card);
    }

    function getHandValue() {
      let total = 0;
      let aces = 0;
      for (let card of playerCards) {
        if (card === 'A') aces += 1;
        total += cardValue(card);
      }
      while (total > 21 && aces > 0) {
        total -= 10;
        aces -= 1;
      }
      return total;
    }

    function getAdvice() {
      if (playerCards.length < 2 || !dealerCard) {
        alert("Please select 2 player cards and 1 dealer card.");
        return;
      }

      const total = getHandValue();
      const dealerVal = cardValue(dealerCard);
      const decks = parseInt(document.getElementById('deckCount').value);
      const totalCards = decks * 52;
      const remainingDecks = Math.max((totalCards - cardsSeen) / 52, 1);
      const trueCount = runningCount / remainingDecks;
      let move = 'Stand';

      if (total <= 11) move = 'Hit';
      else if (total === 12 && (dealerVal >= 4 && dealerVal <= 6)) move = 'Stand';
      else if (total === 12) move = 'Hit';
      else if (total >= 13 && total <= 16 && dealerVal <= 6) move = 'Stand';
      else if (total >= 13 && total <= 16 && dealerVal >= 7) move = 'Hit';
      else if (total >= 17) move = 'Stand';

      if (total === 16 && dealerVal === 10 && trueCount >= 0) move = 'Stand';
      if (total === 15 && dealerVal === 10 && trueCount >= 4) move = 'Stand';
      if (total === 12 && dealerVal === 3 && trueCount >= 2) move = 'Stand';
      if (total === 12 && dealerVal === 2 && trueCount >= 3) move = 'Stand';

      document.getElementById('hand-total').innerText = "Player total: " + total;
      document.getElementById('advice').innerText = "Recommended move: " + move;
    }
  </script>
</body>
</html>
